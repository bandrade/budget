<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/templates/default.xhtml">
    <f:metadata>
        <f:viewParam name="user" value="#{tarefaAction.usuario}" />
        <f:event type="preRenderView" listener="#{tarefaAction.obterTarefasUsuario()}" />
    </f:metadata>

	<ui:param name="pageTitle" value="Human Tasks" />

    <ui:define name="content">
    	<h:form>
	    	<h:panelGroup rendered="#{empty tarefaAction.tarefas}">
	            <i>Voce nao possui tarefas pendentes.</i>
	        </h:panelGroup>
	         <p:dataTable id="userTasksTable" border="1" rendered="#{not empty tarefaAction.tarefas}"
	                     value="#{tarefaAction.tarefas}" var="_item"  selection="#{tarefaAction.tarefaSelecionada}"
	                     rowKey="#{_item.id}">
	            <p:column>
	                <f:facet name="header">
	                    <h:outputText value="Name1" />
	                </f:facet>
	                <p:commandLink action="#{tarefaAction.aprovarTarefa()}" value="#{_item.name}" ajax="false">
	                	<f:setPropertyActionListener target="#{tarefaAction.tarefaSelecionada}" value="#{_item}" />
	                </p:commandLink>
	            </p:column>
	            <p:column>
	                <f:facet name="header">
	                    <h:outputText value="Process instance ID" />
	                </f:facet>
	                <h:outputText id="processInstanceId" value="#{_item.description}" />
	            </p:column>
	        </p:dataTable>
       </h:form>
    </ui:define>
</ui:composition>